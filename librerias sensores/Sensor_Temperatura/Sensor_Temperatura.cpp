// ---------------------------------------------------
// LIBRERIA: Sensor Temperatura
// ---------------------------------------------------

#include "Sensor_Temperatura.h" // Libreria propia del sensor de temperatura
#include "Adafruit_ADS1X15.h" // Libreria del ADS1115
Adafruit_ADS1115 ADS3;

// ---------------------------------------------------
// ---------------------------------------------------
sensorTemperatura::sensorTemperatura()
{
	ADS3.begin();
	ADS3.setGain(GAIN_ONE);
	adc = 0;
	PIN = 0;
	V0 = 0;
	m = 0;
	n = 0;
	temperature = 0;
}


// ---------------------------------------------------
// ---------------------------------------------------
void sensorTemperatura::setADS_PIN(int ADS_pin)
{
	PIN = ADS_pin;
}


// ---------------------------------------------------
// ---------------------------------------------------
int sensorTemperatura::readValue()
{
  adc = ADS3.readADC_SingleEnded((*this).PIN);
  return adc;
}


// ---------------------------------------------------
// ---------------------------------------------------
double sensorTemperatura::getTemperature()
{
	V0 = (4.096*adc/(pow(2,15)-1));
	temperature = (V0-n)/m;
	return temperature;
}


// ------------------------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------------------------
void sensorTemperatura::setValue_m(double value)
{
	m = value;
}


// ---------------------------------------------------
// ---------------------------------------------------
void sensorTemperatura::setValue_n(double value)
{
	n = value;
}
// ------------------------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------------------------


// ------------------------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------------------------
double sensorTemperatura::getValue_m()
{
	return (*this).m;
}


// ---------------------------------------------------
// ---------------------------------------------------
double sensorTemperatura::getValue_n()
{
	return (*this).n;
}
// ------------------------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------------------------
